{|@ wrapper |}
{|> header |}

<div class="col12 grid12 gap1">
    <div class="col6">name <input type="text" id="name" value="{| target.name |}"></div>
    <div class="col6">description <input type="text" id="description" value="{| target.description |}"></div>
    <div class="col6">keywords <input type="text" id="keywords" value="{| target.keywords |}"></div>
    <div class="col6">
        {|* target.roles: role |}
        <div><input type="checkbox" {|# role |} checked{|/# role |}>{| key |}</div>
        {|/* target.roles |}
    </div>
    <div class="col6"></div>
    <button class="col6" type="button" id="update">update</button>
</div>

{|> footer |}

<script>
    const updateBtn = document.querySelector('#update')

    const name = document.querySelector('#name').value

    updateBtn.addEventListener('click', event => {
        event.target.textContent = '...'
        const content = contentBox.value
        const unique = contentBox.dataset.unique

        const url = `/backend/thing-update`

        const headers = {
            // 'Access-Control-Allow-Credentials': 'true',
            'Accept': 'application/json',
            'Content-Type': 'application/json',
        }

        const body = {
            name,
        }

        fetch(url, {
            method: 'post',
            mode: 'cors',
            credentials: 'include',
            cache: 'no-cache',
            headers: headers,
            body: JSON.stringify(body)
        })
            .then(data => {
                return data.json()
            })
            .then(json => {
                console.log(json)
            })
            .catch(err => {
                console.log(err)
                console.log({
                    status: true,
                    message: "network err."
                })
            })
    })
</script>