{|@ wrapper |}
{|> header |}

<p>{| target.name |}</p>
<p>{| target.unique |}</p>
<textarea id="content" data-unique="{| target.unique |}" style="width: 100%;height:20vh;">
{|& target.content |}
</textarea>
<button id="update">update</button>

{|> footer |}

<script>
    const updateBtn = document.querySelector('#update')
    const contentBox = document.querySelector('#content')

    updateBtn.addEventListener('click', event => {
        event.target.textContent = '...'
        const content = contentBox.value
        const unique = contentBox.dataset.unique

        const url = `/{| backendFirstPath |}/thing-update`

        const headers = {
            // 'Access-Control-Allow-Credentials': 'true',
            'Accept': 'application/json',
            'Content-Type': 'application/json',
        }

        const body = {
            content,
            unique,
        }

        fetch(url, {
            method: 'post',
            mode: 'cors',
            credentials: 'include',
            cache: 'no-cache',
            headers: headers,
            body: JSON.stringify(body)
        })
            .then(data => {
                return data.json()
            })
            .then(json => {
                console.log(json)
            })
            .catch(err => {
                console.log(err)
                console.log({
                    status: true,
                    message: "network err."
                })
            })
    })
</script>