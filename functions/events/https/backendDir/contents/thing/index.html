{|@ wrapper |}
{|> header |}

<div class="col0 grid1 gap1">

    <div class="col0 grid1 gap1">

        <div class="col0 grid12">
            <a class="col3 pad1 cen mid button" href="/{| backendFirstPath |}/thing-add">add thing</a>
        </div>

        <ul class="list col0 grid3 gap2">
            {|* targets: target |}
            <li id="id_{| target.id |}" class="list-item col0 grid2 gap1 pad1">
                <h2 class="col2">{| target.name |}</h2>
                <div class="col2 grid3 gap1">
                    <span class="col1">order <i class="fas fa-caret-right"></i> </span><span class="col2">{| target.order |}</span>
                </div>
                <div class="col2 grid3 gap1">
                    <span class="col1">unique <i class="fas fa-caret-right"></i> </span><span class="col2">{| target.unique |}</span>
                </div>
                <div class="col2 grid3 gap1">
                    <span class="col1">parents <i class="fas fa-caret-right"></i></span>
                    <ul class="col2">
                        {| * target.parents : parent |}
                        <li>{| parent |}</li>
                        {| /* |}
                    </ul>
                </div>
                <div class="col2 grid3 gap1">
                    <span class="col1">roles <i class="fas fa-caret-right"></i></span>
                    <span class="col2">
                        {| * target.roles : key : role |}<input type="checkbox" {| #role |} checked{| /# |} readonly><label>{| key |}</label>{| /* |}
                    </span>
                </div>
                <div class="col2 grid3 gap1">
                    <span class="col1">issue <i class="fas fa-caret-right"></i> </span>
                    <span class="col2">{| target.issue |}</span>
                </div>
                <div class="col2 grid3 gap1">
                    <span class="col1">description <i class="fas fa-caret-right"></i> </span>
                    <span class="col2">{| target.description |}</span>
                </div>
                <div class="col2 grid3 gap1">
                    <span class="col1">summary <i class="fas fa-caret-right"></i> </span>
                    <span class="col2">{| target.summary |}</span>
                </div>
                <div class="col2 grid3 gap1">
                    <span class="col1">keywords <i class="fas fa-caret-right"></i> </span>
                    <span class="col2">{| ~toString(target.keywords) |}</span>
                </div>
                <div class="col2">
                    <label for="content">content</label>
                    <textarea id="content" name="content" class="target_item">{| target.content |}</textarea>
                </div>
                <a class="col1 button" href="/{| backendFirstPath |}/thing/{| target.id |}">edit</a>
<button class="col1 delete_button" type="button" class="delete_button" data-request_url="{| backendFirstPath |}/thing-delete" data-id="{| target.id |}">delete</button>
            </li>
            {|/*|}
        </ul>

    </div>

</div>
{|> footer |}


<script type="module">

    import { Base } from '/{| backendFirstPath |}/base.js';
    var base = Base.init()

    // get element
    const deleteBtnElements = document.querySelectorAll('.delete_button')

    deleteBtnElements.forEach(deleteBtnElement => {

        // click event
        deleteBtnElement.addEventListener('click', event => {

            // get button
            const button = event.currentTarget
            
            // not change then show warnning
            base.requestServer(button, true, { id })
        })
    });

</script>