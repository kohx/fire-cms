{|@ wrapper |}
{|> header |}

<div class="col0 grid1 gap1">

    <div class="col0 grid12">
        <a class="col3 pad1 cen mid button" href="/{| backendFirstPath |}/user-add">add user</a>
    </div>

    <ul class="list col0 grid3 gap2">
        {|* targets: target |}
        <li id="id_{| target.uid |}" class="list-item col0 grid2 gap1 pad1">
            <h2 class="col2">{| target.name |}</h2>
            <div class="col2 grid3 gap1"><span class="col1">order <i class="fas fa-caret-right"></i> </span><span class="col2">{| target.order |}</span></div>
            <div class="col2 grid3 gap1"><span class="col1">uid <i class="fas fa-caret-right"></i> </span><span class="col2">{| target.uid |}</span></div>
            <div class="col2 grid3 gap1"><span class="col1">email <i class="fas fa-caret-right"></i> </span><span class="col2">{| target.email |}</span></div>
            <div class="col2 grid3 gap1"><span class="col1">role <i class="fas fa-caret-right"></i> </span><span class="col2">{| target.role |}</span></div>
            <div class="col2 grid3 gap1"><span class="col1">description <i class="fas fa-caret-right"></i> </span><span class="col2">{| target.description |}</span></div>
            <a class="col1 button" href="/{| backendFirstPath |}/user/{| key |}">edit</a>
            <button class="col1 delete_button" type="button" class="delete_button" data-request_url="{| backendFirstPath |}/user-delete" data-uid="{| key |}">delete</button>
        </li>
        {|/*|}
    </ul>

</div>

{|> footer |}

<script type="module">

    import { Base } from '/{| backendFirstPath |}/base.js';
    var base = Base.init()

    // settingsも合わせる

    // get element
    const updateBtnElements = document.querySelectorAll('.delete_button')

    updateBtnElements.forEach(updateBtnElement => {

        // click event
        updateBtnElement.addEventListener('click', event => {

            // get button
            const button = event.currentTarget

            // add uid fore delete
            const uid = button.dataset.uid != null ? button.dataset.uid : null
            
            // not change then show warnning
            base.requestServer(button, true, { uid })
        })
    });

</script>