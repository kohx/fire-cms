{|@ wrapper |}
{|> header |}

<div class="col0 grid1 gap1">

    <div class="col0 grid12">
        <a class="col3 pad1 cen mid button" href="/{| backendFirstPath |}/user-add">add user</a>
    </div>

    <ul class="user-list col0 grid3">
        {|* targets: target |}
        <li class="user-item col0 grid2 gap1">
            <h2>{| target.name |}</h2>
            <div>{| key |}: {| target.name |}</div>
            <div>role: {| target.role |}</div>
            <a class="" href="/{| backendFirstPath |}/user/{| key |}">edit</a>
            <button type="button" class="delete_button" data-request_url="{| backendFirstPath |}/user-delete" data-uid="{| key |}">delete</button>
        </li>
        {|/*|}
    </ul>

</div>

{|> footer |}

<script type="module">

    import { Base } from '/{| backendFirstPath |}/base.js';
    var base = Base.init()

    // settingsも合わせる
    // TODO:: validation statusもストリングに変更する？

    // get element
    const updateBtnElements = document.querySelectorAll('.delete_button')

    updateBtnElements.forEach(updateBtnElement => {

        // click event
        updateBtnElement.addEventListener('click', event => {

            // get button
            const button = event.currentTarget

            // add uid fore delete
            const uid = button.dataset.uid != null ? button.dataset.uid : null
            
            // not change then show warnning
            base.requestServer(button, true, { uid })
        })
    });

</script>